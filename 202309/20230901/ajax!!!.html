<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
</head>
<body>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        fetch('https://codingapple1.github.io/price.json') //get요청 
            .then((response)=> { //then내 콜백함수
                if(!response.ok){ //정확히 모든에러캐치하려면
                    throw new Error('400아니면 500에러남')
                }
                return response.json() //콜백함수내 파라미터 수신한 데이터
            })
            .then((결과)=>{ //결과출력
                console.log(결과)
            })
            .catch(()=>{ //에러처리 catch사용 ajax요청실패했을때
                console.error('에러남')
            })

        //async await - then함수대신
        async function 데이터가져오는함수(){
            try { //try블록내에서 문제가발생하면, catch에서 처리
                const response = await fetch('https://codingapple1.github.io/price.json') 
            if(!response.ok){ 
                throw new Error('400아니면 500에러남')
            }
            const result = await response.json() 
            console.log(result)
            return result
            } catch(error){ 
            console.error('에러남')
                throw error
            }
        }
        데이터가져오는함수()
        .catch(() => {
            console.error('에러남');
        });
        
        //주로 axios 라이브러리 많이 썼음. 초간결
        axios.get('https://codingapple1.github.io/price.json')
            .then((result)=>{
                console.log(result.data)
            }).catch(()=>{
                console.log('에러남')
            })

        
        //자주보는 에러 CORS 보안때문이라 실무아니면 아래코드 써놓으면 모든url ajax요청으로 가능
        // var cors = require('cors')
        // app.use(cors())
    </script>
</body>
</html>